#!/bin/bash
DIRECTORY=/etc/mdadm
FILE=/etc/mdadm/mdadm.conf
if ! test -d $DIRECTORY; then
    mkdir $DIRECTORY
else
    echo "$DIRECTORY exist"
fi
if ! test -f $FILE; then
    mkdir $FILE
else
    echo "$FILE exist"
fi

mdadm --zero-superblock --force /dev/sd{c,d}
mdadm --create --verbose /dev/md0 -l 1 -n 2 /dev/sd{c,d}
echo "DEVICE partitions" > /etc/mdadm/mdadm.conf
mdadm --detail --scan --verbose | awk '/ARRAY/ {print}' >> /etc/mdadm/mdadm.conf
parted -s /dev/md0 mklabel gpt
parted /dev/md0 mkpart primary ext4 0% 100%
mkfs.ext4 /dev/md0p1
mkdir /mnt/raid
mount /dev/md0p1 /mnt/raid
mdadm -D /dev/md0